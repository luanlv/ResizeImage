if(!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.msie=!1;var nAgt=navigator.userAgent;jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}!function(e){e.mbGallery={name:"mb.gallery",author:"Matteo Bicocchi",version:"2.3",defaults:{containment:"body",cssURL:"css/",skin:"white",overlayBackground:"#333",exifData:!1,printOutThumbs:!1,galleryTitle:"My Gallery",imageSelector:".imgFull",thumbnailSelector:".imgThumb",titleSelector:".imgTitle",descSelector:".imgDesc",minWidth:50,minHeight:50,maxWidth:0,maxHeight:0,fullScreen:!0,addRaster:!1,overlayOpacity:.5,startFrom:1,fadeTime:500,slideTimer:6e3,autoSlide:!0,onOpen:function(){},onBeforeClose:function(){},onClose:function(){},onChangePhoto:function(){}},buildMbGallery:function(i){var t=e(this).get(0);if(t.initialized)return void e(t).mb_closeGallery();e.mbGallery.actualGallery&&e(e.mbGallery.actualGallery).mb_closeGallery(!0),e.mbGallery.actualGallery=t,t.options=e.extend({},e.mbGallery.defaults,i),t.options.onOpen&&t.options.onOpen();var s="<link rel='stylesheet' id='mbGalleryCss' type='text/css' href='"+t.options.cssURL+t.options.skin+".css' title='tyle'  media='screen'/>";if(e("#mbGalleryCss")&&e("#mbGalleryCss").remove(),e("head").append(s),e(t).hide(),t.galleryID="mb_gallery_"+t.id,e(t).mb_getPhotos(),t.options.printOutThumbs)return t.options.printOutThumbs=!1,void e(t).mb_thumbsOnPage();t.initialized=!0;var r=e("<div/>").addClass("mb_overlay").one("click",function(){e(t).mb_closeGallery()}).css({opacity:t.options.overlayOpacity,background:t.options.overlayBackground}).hide(),n=e("<div/>").attr("id",t.galleryID).addClass("galleryScreen").addClass("mbGall_"+t.options.skin),o=e("<div/>").addClass("galleryDesc").css({opacity:.7}).hide(),a=e("<div/>").addClass("galleryTitle").html(t.options.galleryTitle).hide(),l=e("<div/>").addClass("galleryImg").hover(function(){o.html()&&o.slideDown()},function(){o.slideUp()}).dblclick(function(){t.sliding?e(t).mb_stopSlide():e(t).mb_startSlide()}),d=e("<div/>").addClass("galleryRaster").css({width:"100%",height:"100%"}),m=e("<div/>").addClass("loader").mb_bringToFront().css("opacity",.7).hide(),u=e("<div/>").addClass("galleryThumbs").hide(),b=e("<div/>").addClass("galleryNav").hide(),h=e("<div/>").addClass("galleryCloseIcon ico").one("click",function(){e(t).mb_closeGallery()});n.bind("mouseleave",function(){e(t).mb_hideThumbs()}),"body"==t.options.containment?(e("body").append(r),r.fadeIn(400,function(){}),e("body").append(n)):(n.addClass("contained"),e("#"+t.options.containment).show(),e("#"+t.options.containment).append(n)),n.append(b),n.append(a),a.append(h),n.append(l),l.append(m),t.options.addRaster&&l.append(d).mb_bringToFront(),l.append(u),l.append(o),"body"===t.options.containment&&n.css({minWidth:t.options.minWidth,minHeight:t.options.minHeight,top:"50%",marginTop:-(t.options.minHeight/2),left:"50%",marginLeft:-(t.options.minWidth/2)}),e.browser.msie&&e.browser.version<8&&n.css({width:t.options.minWidth,height:t.options.minHeight}),l.css({minWidth:t.options.minWidth,minHeight:t.options.minHeight}),t.sliding=t.options.autoSlide,t.idx="random"===t.options.startFrom?Math.floor(Math.random()*(t.images.length-1)):t.options.startFrom>t.images.length?t.images.length-1:t.options.startFrom-1,e("#"+t.galleryID).find(".loader").addClass("loading").show(),e(t).mb_buildThumbs(),e(t).mb_selectThumb(),e(t).mb_buildNav(),e(t).mb_preload()},getPhotos:function(){var i=e(this).get(0);i.images=new Array,e(i).find(i.options.thumbnailSelector).each(function(t){var s=new Object;s.idx=t,s.thumb=e(this).attr("href"),s.full=e(this).next("a").attr("href"),s.fullWidth=e(this).attr("w")?e(this).attr("w"):!1,s.fullHeight=e(this).attr("h")?e(this).attr("h"):!1,s.title=e(this).nextAll(i.options.titleSelector).html(),s.description=e(this).nextAll(i.options.descSelector).html(),i.images.push(s)})},preload:function(){var i=e(this).get(0);i.sliding||e("#"+i.galleryID).find(".loader").addClass("loading").show();var t=e.browser.msie?"?"+(new Date).getMilliseconds():"?"+(new Date).getMilliseconds(),s=i.options.exifData;e("<img/>").load(function(){i.images[i.idx].fullWidth||(i.images[i.idx].fullWidth=this.width),i.images[i.idx].fullHeight||(i.images[i.idx].fullHeight=this.height),i.sliding||e("#"+i.galleryID).find(".loader").fadeOut(500,function(){e("#"+i.galleryID).find(".loader").removeClass("loading")}),e(i).mb_changePhoto(t),e(i).mb_selectThumb()}).attr({src:i.images[i.idx].full+t,exif:s})},changePhoto:function(i){var t=e(this).get(0);e("#"+t.galleryID).find(".loader").fadeOut(500,function(){e("#"+t.galleryID).find(".loader").removeClass("loading")});var s=e("#"+t.galleryID).find(".galleryImg"),r=e("#"+t.galleryID).find(".galleryTitle"),n=e("#"+t.galleryID).find(".photoTitle"),o=e("#"+t.galleryID).find(".galleryDesc"),a=e("#"+t.galleryID),l=e("#"+t.galleryID).find(".galleryNav"),d=e("<img/>").addClass("highRes").attr({src:t.images[t.idx].full+i}).css({position:"absolute",top:0,left:0}).hide();s.prepend(d);var m=d.getDim(t,t.images[t.idx].fullWidth,t.images[t.idx].fullHeight),u=parseFloat(m[1]),b=parseFloat(m[0]);"body"===t.options.containment&&a.animate({top:"50%",marginTop:-(b/2),left:"50%",marginLeft:-(u/2)},"slow",function(){e.browser.msie&&e.browser.version<8&&a.css({width:"",height:""})}),s.animate({width:u,height:b},"slow"),d.fadeIn("slow",function(){l.fadeIn(500),r.fadeIn()}),d.next("img").fadeOut(t.options.fadeTime,function(){e(this).remove()}),n.fadeOut(t.options.fadeTime,function(){n.html(t.images[t.idx].title),n.fadeIn()}),o.html(t.images[t.idx].description),t.sliding&&(l.find(".startStopIcon").addClass("selected"),t.startGallery=setTimeout(function(){t.idx=t.idx===t.images.length-1?0:t.idx+1,e(t).mb_preload()},t.options.slideTimer)),l.find(".photoCounter").html(t.idx+1+" / <span class='totalImages'>"+t.images.length+"</span>"),""===o.html()&&o.slideUp(),t.options.onChangePhoto&&t.options.onChangePhoto()},buildThumbs:function(){var i=e(this).get(0),t=e("#"+i.galleryID).find(".galleryThumbs");t.empty(),e(i.images).each(function(s){var r=this,n=e("<img/>").addClass("thumb");n.attr("src",r.thumb),n.attr("id",i.galleryID+"_thumb_"+s),n.bind("click",function(){e(this).is(".selected")||(i.idx=r.idx,e(i).mb_selectThumb(),e(i).mb_stopSlide(),e(i).mb_preload(),e(i).mb_hideThumbs())}),t.css("opacity",.9),t.append(n)})},buildNav:function(){var i=e(this).get(0),t=e("#"+i.galleryID).find(".galleryNav"),s=e("#"+i.galleryID).find(".galleryThumbs"),r=e("<div/>").addClass("photoTitle"),n=e("<div/>").attr("title","show/hide thumbnail images").addClass("thumbsIcon ico").bind("click",function(){s.is(":hidden")?e(i).mb_showThumbs():e(i).mb_hideThumbs()}),o=e("<div/>").attr("title","start/stop slide show").addClass("startStopIcon ico").bind("click",function(){i.sliding?e(i).mb_stopSlide():e(i).mb_startSlide()}),a=e("<div/>").attr("title","show previous image").addClass("prevIcon ico").bind("click",function(){e(i).mb_galleryPrev()}),l=e("<div/>").attr("title","show next image").addClass("nextIcon ico").bind("click",function(){e(i).mb_galleryNext()}),d=i.options.exifData,m=d?e("<div/>").attr("title","Show Exitf data").addClass("exifIcon ico").bind("click",function(){e(i).mb_showExifData()}):"",u=e("<div/>").addClass("photoCounter ico"),b=e("<div/>").addClass("galleryBtns");t.append(r),t.append(b),b.prepend(n).prepend(o).prepend(a).prepend(l).prepend(d?m:"").prepend(u)},showExifData:function(){var i=e(this).get(0);e(i).mb_stopSlide()},selectThumb:function(){var i=e(this).get(0),t=e("#"+i.galleryID).find(".galleryThumbs"),s=e("#"+i.galleryID+"_thumb_"+i.idx);t.find(".thumb").removeClass("selected").css("opacity",1),s.addClass("selected").css("opacity",.4)},startSlide:function(i){var t=e(this).get(0),s=e("#"+t.galleryID).find(".galleryNav");t.sliding=!0,t.idx=i?i:t.idx===t.images.length-1?0:t.idx+1,e(t).mb_preload(),s.find(".startStopIcon").addClass("selected")},stopSlide:function(){var i=e(this).get(0),t=e("#"+i.galleryID).find(".galleryNav");i.sliding=!1,clearTimeout(i.startGallery),t.find(".startStopIcon").removeClass("selected")},prev:function(){var i=e(this).get(0);e(i).mb_stopSlide(),i.sliding=!1,i.idx=0===i.idx?i.images.length-1:i.idx-1,e(i).mb_preload()},next:function(){var i=e(this).get(0);e(i).mb_stopSlide(),i.sliding=!1,i.idx=i.idx===i.images.length-1?0:i.idx+1,e(i).mb_preload()},gotoIDX:function(i){var t=e(this).get(0);i-1!==t.idx&&(t.idx=i-1,e(t).mb_selectThumb(),e(t).mb_stopSlide(),e(t).mb_preload(),e(t).mb_hideThumbs())},loader:function(){var i=e(this).get(0),t=e("#"+i.galleryID).find(".galleryNav");t.find(".thumbsIcon").addClass("selected");var s=e("#"+i.galleryID).find(".galleryThumbs");s.slideDown()},hideThumbs:function(){var i=e(this).get(0),t=e("#"+i.galleryID).find(".galleryNav");t.find(".thumbsIcon").removeClass("selected");var s=e("#"+i.galleryID).find(".galleryThumbs");s.slideUp()},closeGallery:function(i){var t=e(this).get(0);t.options.onBeforeClose&&t.options.onBeforeClose();var s=i?1:"slow";e.browser.msie?(e("#"+t.galleryID).remove(),e("#"+t.options.containment).hide()):e("#"+t.galleryID).animate({position:"absolute",top:-1e3},s,function(){e("#"+t.galleryID).remove(),e("#"+t.options.containment).slideUp(),t.options.onClose&&t.options.onClose()}),e(".mb_overlay").slideUp(s,function(){e(".mb_overlay").remove()}),e(t).mb_stopSlide(),t.initialized=!1},thumbsOnPage:function(){var i=e(this).get(0);if(null!=e("#"+i.id+"_thumbsContainer").html())return void(e("#"+i.id+"_thumbsContainer").is(":visible")?e("#"+i.id+"_thumbsContainer").slideUp(500,function(){e(this).remove()}):e("#"+i.id+"_thumbsContainer").slideDown(500));var t=e("<div>").attr("id",i.id+"_thumbsContainer").addClass("thumbsContainer").hide();e(i).after(t),e(i.images).each(function(s){var r=this,n=e("<img/>").addClass("thumb");n.attr("src",r.thumb),n.bind("click",function(){e(this).is(".selected")||(i.initialized?e(i).mb_gotoIDX(s+1):(i.options.startFrom=s+1,i.options.autoSlide=!1,i.options.printOutThumbs=!1,e(i).mbGallery(i.options)))}),n.attr("id",i.galleryID+"_thumb1_"+s),t.append(n)}),t.slideDown()}},jQuery.fn.extend({getDim:function(i,t,s){var r=t?t:e(this).outerWidth(),n=s?s:e(this).outerHeight(),o="body"===i.options.containment?e(window).height():e("#"+i.options.containment).innerHeight(),a="body"===i.options.containment?e(window).width():e("#"+i.options.containment).innerWidth();return i.options.maxHeight>0&&e(this).outerHeight()>i.options.maxHeight&&(n=i.options.maxHeight),i.options.maxWidth>0&&e(this).outerWidth()>i.options.maxWidth&&(r=i.options.maxWidth),(parseFloat(n)+130>o||parseFloat(r)+100>a||i.options.fullScreen)&&(a/o>=t/s?(n=o-130,r=n*(t/s),e(this).attr("height",n),e(this).attr("width",r)):(r=a-100,n=r*(s/t),e(this).attr("height",n),e(this).attr("width",r))),[n,r]}}),e.fn.mbGallery=e.mbGallery.buildMbGallery,e.fn.mb_getPhotos=e.mbGallery.getPhotos,e.fn.mb_buildThumbs=e.mbGallery.buildThumbs,e.fn.mb_buildNav=e.mbGallery.buildNav,e.fn.mb_preload=e.mbGallery.preload,e.fn.mb_changePhoto=e.mbGallery.changePhoto,e.fn.mb_selectThumb=e.mbGallery.selectThumb,e.fn.mb_showExifData=e.mbGallery.showExifData,e.fn.mb_galleryNext=e.mbGallery.next,e.fn.mb_galleryPrev=e.mbGallery.prev,e.fn.mb_gotoIDX=e.mbGallery.gotoIDX,e.fn.mb_startSlide=e.mbGallery.startSlide,e.fn.mb_stopSlide=e.mbGallery.stopSlide,e.fn.mb_showThumbs=e.mbGallery.loader,e.fn.mb_thumbsOnPage=e.mbGallery.thumbsOnPage,e.fn.mb_hideThumbs=e.mbGallery.hideThumbs,e.fn.mb_closeGallery=e.mbGallery.closeGallery,jQuery.fn.mb_bringToFront=function(){var i=10;return e("*").each(function(){if("absolute"===e(this).css("position")||"fixed"==e(this).css("position")){var t=parseInt(e(this).css("zIndex"));i=t>i?parseInt(e(this).css("zIndex")):i}}),e(this).css("zIndex",i+=1),e(this)}}(jQuery);